<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Confirm Edit</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="title">TODO LIST</h1>
      <a href="/logout" class="logout-btn">Logout</a>
    </div>
    <div class="divider-long"></div>
    <h2>Preview Changes</h2>
    <div class="preview-box">
      <p><strong>New Title:</strong> <%= title %></p>
      <p><strong>New Description:</strong> <%= description %></p>
      <% if (dueDate && dueDate !== '' && dueDate !== 'null') { %>
        <% 
          const dateStr = dueTime && dueTime !== '' && dueTime !== 'null' 
            ? `${dueDate}T${dueTime}:00` 
            : `${dueDate}T00:00:00`;
          const due = new Date(dateStr);
        %>
        <p><strong>Due:</strong> 
          <%= due.toLocaleString('en-GB', { 
            timeZone: 'Asia/Hong_Kong', 
            year: 'numeric', month: 'short', day: 'numeric', 
            hour: '2-digit', minute: '2-digit', hour12: true 
          }) %> HKT
        </p>
      <% } else { %>
        <p><strong>Due:</strong> No due date</p>
      <% } %>
    </div>
    <form action="/todos/update-confirm/<%= id %>" method="POST">
      <input type="hidden" name="title" value="<%= title %>">
      <input type="hidden" name="description" value="<%= description %>">
      <button class="confirm-btn">Confirm Update</button>
      <a href="/todos" class="cancel-btn">Cancel</a>
    </form>
  </div>
</body>
</html>
